{% extends 'layouts/front/base.html.twig' %}

{% block title %}{{ parametres.structure.name ?? company_name }} | {{ title }}{% endblock %}
{% block body %}
    {{ fil_arial(title, 'Documents') }}
    <div class="container-fluid page__container page-section">
        {% if documents.count > 0 %}
        {% for row in documents|batch(2) %}
            <div class="row card-group-row">
                {% for document in row %}
                    <div class="card-group-row__col col-md-6">
                        <div class="card card-group-row__card card-sm">
                            <div class="card-body d-flex align-items-center">
                                <a href="javascript:" class="avatar overlay overlay--primary avatar-4by3 mr-12pt">
                                    {% if document.imagename %}
                                        <img src="{{ vich_uploader_asset(document, 'imageFile') | imagine_filter('thumbnail') }}" alt="{{ document.name }}" class="avatar-img rounded">
                                    {% else %}
                                        <img src="{{ asset('assetics/images/empty/small.png') | imagine_filter('thumbnail') }}" alt="{{ document.name }}" class="avatar-img rounded">
                                    {% endif %}
                                    <span class="overlay__content"></span>
                                </a>
                                <div class="flex">
                                    <a class="card-title" href="javascript:">{{ document.name }}</a>
                                    <div class="card-subtitle text-50">{{ document.categories.name }}</div>
                                </div>
                            </div>
                            <div class="card-footer">
                                <div class="d-flex align-items-center">
                                    <div class="flex mr-2">
                                        <a href="#" class="btn btn-light btn-sm">
                                            <i class="material-icons icon--left">visibility</i> Aperçu du document
                                        </a>
                                    </div>

                                    <div class="dropdown">
                                        <a href="#" data-toggle="dropdown" data-caret="false" class="text-muted">
                                            <i class="material-icons">more_horiz</i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right">
                                            <div class="dropdown-divider"></div>
                                            <a href="javascript:void(0)" class="dropdown-item text-danger">Télécharger le document</a>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endfor %}

        <div class="mb-32pt">
            <ul class="pagination justify-content-start pagination-xsm m-0">
                {{ knp_pagination_render(documents) }}
            </ul>
        </div>
        {% else %}
            <div class="col-md-12">
                <div class="alert alert-soft-warning mb-0 p-8pt">
                    <div class="d-flex align-items-start">
                        <div class="mr-8pt">
                            <i class="material-icons">error_outline</i>
                        </div>
                        <div class="flex">
                            <small class="text-100">{{ data_none }}</small>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
{% endblock %}