{% extends 'layouts/front/base.html.twig' %}

{% block title %}{{ parametres.structure.name ?? company_name }} | {{ title }}{% endblock %}
{% block body %}
    {{ fil_arial(title, 'Documents') }}
    <div class="container-fluid page__container page-section">

        {% for row in categories|batch(2) %}
            <div class="row card-group-row">
                {% for categorie in row %}
                    {% set link = '' %}
                    {% if categorie.documents|length > 0 %}
                        {% set link = path('documents.categorie', {'id': categorie.id, 'slug': categorie.slug}) %}
                    {% else %}
                        {% set link = 'javascript:' %}
                    {% endif %}
                    <div class="card-group-row__col col-md-6">
                        <div class="card card-group-row__card card-sm">
                            <div class="card-body d-flex align-items-center">
                                <a href="{{ link }}" class="avatar overlay overlay--primary avatar-4by3 mr-12pt">
                                    <img src="{{ asset('assetics/images/empty/small.png') | imagine_filter('small') }}" alt="{{ categorie.name }}" class="avatar-img rounded">
                                    <span class="overlay__content"></span>
                                </a>
                                <div class="flex">
                                    <a class="card-title" href="{{ link }}">{{ categorie.name }}</a>
                                    <div class="card-subtitle text-50">{{ pluralize(categorie.documents.count, 'document')}}</div>
                                </div>
                            </div>
                            <div class="card-footer">
                                <div class="d-flex align-items-center">
                                    <div class="flex mr-2">
                                        <a href="{{ link }}" class="btn btn-light btn-sm">
                                            <i class="material-icons icon--left">folder</i> Documents
                                            <span class="badge badge-dark badge-notifications ml-2">{{ categorie.documents.count }}</span>
                                        </a>
                                    </div>

                                    <div class="dropdown">
                                        <a href="javascript:" data-toggle="dropdown" data-caret="false" class="text-muted">
                                            <i class="material-icons">more_horiz</i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right">
                                            <div class="dropdown-divider"></div>
                                            <a href="{{ link }}" class="dropdown-item text-danger">Parcourir les documents</a>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endfor %}

        <div class="mb-32pt">

            <ul class="pagination justify-content-start pagination-xsm m-0">
                {{ knp_pagination_render(categories) }}
            </ul>
        </div>
    </div>
{% endblock %}